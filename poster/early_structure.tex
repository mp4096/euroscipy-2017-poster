% Flasks
\begin{scope}[xshift = 0 cm, yshift = 7 cm, y = 1 cm]
  \draw[rounded corners = 0.3 cm, fill = aurora 3]
    (2, -0.25) -- ++(-90:0.4) -- ++(-75:3.5) -- ++(180:3.25) -- ++(75:3.5) -- ++(90:0.4);
  \draw[ultra thick, rounded corners = 0.3 cm]
    (2, 0.75) -- ++(-90:1.4) -- ++(-75:3.5) -- ++(180:3.25) -- ++(75:3.5) -- ++(90:1.4);

  \draw[rounded corners = 0.3 cm, fill = aurora 2]
    (0, -1) -- ++(-90:0.4) -- ++(-75:3.5) -- ++(180:3.25) -- ++(75:3.5) -- ++(90:0.4);
  \draw[ultra thick, rounded corners = 0.3 cm]
    (0, 0) -- ++(-90:1.4) -- ++(-75:3.5) -- ++(180:3.25) -- ++(75:3.5) -- ++(90:1.4);

  \draw[aurora 2, fill] (-0.6, 0.7) circle (0.4);
  \draw[aurora 2, fill] (-0.9, 1.4) circle (0.3);
  \draw[aurora 2, fill] (-0.4, 1.9) circle (0.35);
  \draw[aurora 3, fill] (1, 1) circle (0.3);
  \draw[aurora 3, fill] (1.5, 1.6) circle (0.4);
  \draw[aurora 3, fill] (1.2, 2.4) circle (0.35);

  \node at (0.25, -5.5) {\Large{}Experiment};
\end{scope}


\draw[ultra thick, -{Latex[scale=1.2]}] (4, -6) -- (10, -6) node[midway, sloped, above] %
  {\Large{}Early structuring};


\pgfmathsetmacro{\TwoDimCellSize}{2.5}
\pgfmathsetmacro{\TwoDimHeaderSize}{1}

\begin{scope}[xshift = 12 cm, yshift = 10 cm]
  \node at ({\TwoDimCellSize*1.5 - \TwoDimHeaderSize*0.5}, -0.8) %
    {\Large{}Structured data, e.g.\ nested dicts};

  \foreach \y in {0, 1, 2} {
    % A-B-C header
    \foreach \x/\c/\s in {0/frost 1/A, 1/frost 0/B, 2/frost 3/C} {
      \draw[\c, fill]
        ({\TwoDimCellSize*\x}, {\TwoDimCellSize*\y})
        rectangle
        +(\TwoDimCellSize, \TwoDimHeaderSize)
        node[midway, polar night 1] {\s};
    }
  }
  \foreach \y/\c/\s in {0/aurora 2/I, 1/aurora 1/II, 2/aurora 0/III} {
    \draw[\c, fill]
      ({-\TwoDimHeaderSize}, {\TwoDimCellSize*\y}) rectangle +(\TwoDimHeaderSize, \TwoDimCellSize)
      node[midway, polar night 1] {\s};
  }
  \foreach \i in {0, 1, ..., 3} {
    \draw[thick]
      ({-\TwoDimHeaderSize}, {\TwoDimCellSize*\i})
      --
      +({\TwoDimCellSize*3 + \TwoDimHeaderSize}, 0);
    \draw[thick] ({\TwoDimCellSize*\i}, 0) -- +(0, {\TwoDimCellSize*3});
  }

  \begin{scope}[
      xshift = {\TwoDimCellSize*0.5 cm},
      yshift = {-(\TwoDimCellSize + \TwoDimHeaderSize)*0.5 cm},
    ]
    % I
    \node at (0, 0) {14, 15}; % A
    \node at (\TwoDimCellSize, 0) {4, 10}; % B
    \node at ({2*\TwoDimCellSize}, 0) {6, 11}; % C

    % II
    \node at (0, \TwoDimCellSize) {3, 8}; % A
    \node at (\TwoDimCellSize, \TwoDimCellSize) {\LARGE $\boldsymbol{\varnothing}$}; % B
    \node at ({2*\TwoDimCellSize}, \TwoDimCellSize) {2}; % C

    % III
    \node at (0, {2*\TwoDimCellSize}) {7, 12}; % A
    \node at (\TwoDimCellSize, {2*\TwoDimCellSize}) {1, 13}; % B
    \node at ({2*\TwoDimCellSize}, {2*\TwoDimCellSize}) {5, 9}; % C
  \end{scope}
\end{scope}


\path[
  ultra thick,
  -{Latex[scale=1.2]},
  decoration={
    zigzag,
    segment length = 32,
    amplitude = 9,
    post = lineto,
    post length = 2pt,
    },
  ] %
  (12, -1.5) edge[decorate] +(-3, 6);
\node[align = left] at (5.5, 2) %
  {\Large{}However, now it is difficult\\\Large{}to reorder the data\ldots};


\begin{scope}[xshift = 5 cm, yshift = -5 cm]
  \foreach \y in {0, 1, 2} {
    % A-B-C header
    \foreach \x/\c/\s in {0/aurora 2/I, 1/aurora 1/II, 2/aurora 0/III} {
      \draw[\c, fill]
        ({\TwoDimCellSize*\x}, {\TwoDimCellSize*\y})
        rectangle
        +(\TwoDimCellSize, \TwoDimHeaderSize)
        node[midway, polar night 1] {\s};
    }
  }
  \foreach \y/\c/\s in {0/frost 1/A, 1/frost 0/B, 2/frost 3/C} {
    \draw[\c, fill]
      ({-\TwoDimHeaderSize}, {\TwoDimCellSize*\y}) rectangle +(\TwoDimHeaderSize, \TwoDimCellSize)
      node[midway, polar night 1] {\s};
  }
  \foreach \i in {0, 1, ..., 3} {
    \draw[thick]
      ({-\TwoDimHeaderSize}, {\TwoDimCellSize*\i})
      --
      +({\TwoDimCellSize*3 + \TwoDimHeaderSize}, 0);
    \draw[thick] ({\TwoDimCellSize*\i}, 0) -- +(0, {\TwoDimCellSize*3});
  }

  \begin{scope}[
      xshift = {\TwoDimCellSize*0.5 cm},
      yshift = {-(\TwoDimCellSize + \TwoDimHeaderSize)*0.5 cm},
    ]
    % A
    \node at (0, 0) {14, 15}; % I
    \node at (\TwoDimCellSize, 0) {3, 8}; % II
    \node at ({2*\TwoDimCellSize}, 0) {7, 12}; % III

    % B
    \node at (0, \TwoDimCellSize) {4, 10}; % I
    \node at (\TwoDimCellSize, \TwoDimCellSize) {\LARGE $\boldsymbol{\varnothing}$}; % II
    \node at ({2*\TwoDimCellSize}, \TwoDimCellSize) {1, 13}; % III

    % C
    \node at (0, {2*\TwoDimCellSize}) {6, 11}; % I
    \node at (\TwoDimCellSize, {2*\TwoDimCellSize}) {2}; % II
    \node at ({2*\TwoDimCellSize}, {2*\TwoDimCellSize}) {5, 9}; % III
  \end{scope}
\end{scope}


\path[
  ultra thick,
  -{Latex[scale=1.2]},
  decoration={
    zigzag,
    segment length = 32,
    amplitude = 9,
    post = lineto,
    post length = 2pt,
    },
  ] %
  (18.5, -1.5) edge[decorate] +(3, 6);
\node at (24, 2) {\Large{}\ldots{}or to `flatten' it};


% 1D summary, A-B-C only
\pgfmathsetmacro{\OneDimLineHeight}{2.5}
\pgfmathsetmacro{\OneDimLineWidth}{5.5}
\pgfmathsetmacro{\OneDimHeaderWidth}{1}

\begin{scope}[xshift = 20 cm, yshift = -5 cm]
  \foreach \y/\c/\s in {0/frost 1/A, 1/frost 0/B, 2/frost 3/C} {
    \draw[\c, fill]
      ({-\OneDimHeaderWidth}, {\OneDimLineHeight*\y}) rectangle +(\OneDimHeaderWidth, \OneDimLineHeight)
      node[midway, polar night 1] {\s};
  }
  \foreach \i in {0, 1, ..., 3} {
    \draw[thick] ({-\OneDimHeaderWidth}, {\OneDimLineHeight*\i}) -- +({\OneDimLineWidth + \OneDimHeaderWidth}, 0);
  }
  \draw[thick] (0, 0) -- +(0, {3*\OneDimLineHeight});

  \begin{scope}[xshift = 0.5 cm, yshift = {-\OneDimLineHeight*0.5 cm}, right]
    \node at (0, 0) {3, 7, 8, 12, 14, 15}; % A
    \node at (0, \OneDimLineHeight) {1, 4, 10, 13}; % B
    \node at (0, {2*\OneDimLineHeight}) {2, 5, 6, 9, 11}; % C
  \end{scope}
\end{scope}
